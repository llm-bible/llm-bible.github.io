<!DOCTYPE html>
<html lang="en-us">

  <head>
  <!-- Begin Web-Stat code v 7.0 -->
  <span id="wts2185292"></span>
  <script>
    var wts = document.createElement('script');
    wts.async = true;
    wts.src = 'https://app.ardalio.com/log7.js';
    document.head.appendChild(wts);
    wts.onload = function() {
      wtslog7(2185292, 2);
    };
  </script>
  <noscript>
    <a href="https://www.web-stat.com">
      <img src="https://app.ardalio.com/7/2/2185292.png" alt="Web-Stat analytics">
    </a>
  </noscript>
  <!-- End Web-Stat code v 7.0 -->

  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta
    name="keywords"
    content="large language models, GPT, transformers, BERT, natural language processing, NLP, deep learning, machine learning, source code, big code, naturalness, software engineering, programming languages, fine-tuning, pretraining, autoregressive models, attention mechanisms, multi-modal models, text generation, reinforcement learning with human feedback, RLHF, GPT-3, GPT-4, ChatGPT, OpenAI, model architectures, transfer learning, LLM applications, LLM benchmarks, LLM interpretability"
  >
  <script>
    window.MathJax = {
      tex: {
        inlineMath: [["\\(","\\)"]],
        displayMath: [["\\[","\\]"]],
      },
      options: {
        processHtmlClass: "mathjax-content",
        processEscapes: true,
      }
    };
  </script>
  <script type="text/javascript" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <title>
    
      Chat with the LLM-Bible Bot &middot; The Large Language Model Bible
    
  </title>

  <!-- Enable responsiveness on mobile devices -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">
  <link
    rel="stylesheet"
    href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface"
  >

  <!-- Icons -->
  <link rel="shortcut icon" href="/public/favicon.svg">
  <link
    rel="search"
    href="/public/opensearchdescription.xml"
    type="application/opensearchdescription+xml"
    title="LLM-Bible"
  />

  <!-- jQuery Library -->
  <script
    src="https://code.jquery.com/jquery-3.2.1.min.js"
    integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
    crossorigin="anonymous"
  ></script>

  <!-- DataTables CSS -->
  <link
    rel="stylesheet"
    type="text/css"
    href="https://cdn.datatables.net/1.10.20/css/jquery.dataTables.css"
  >

  <!-- DataTables JS -->
  <script
    type="text/javascript"
    charset="utf8"
    src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.js"
  ></script>
</head>


  <body class="theme-base-0d layout-reverse">

    <a href='/contributing.html' class='ribbon'>Contribute to LLM-Bible</a>
<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
        <a href="/">
          The Large Language Model Bible
        </a>
      </h1>
      <p class="lead">Research on Large Language Models. Maintained by <a href="http://sjmoran.github.io/">Sean Moran</a>.</p>      
    </div>

    <nav class="sidebar-nav">
      <div class="sidebar-item">
        <p style="font-size: 12px">Search related work 
          <input type='text' id='searchTarget' size="16"/> 
          <button onClick="search();">Go</button>
        </p>
      </div>
      <a class="sidebar-nav-item" href="/papers.html">List of Papers</a>
      <a class="sidebar-nav-item" href="/tags.html">Papers by Tag</a>
      <a class="sidebar-nav-item" href="/tsne-viz.html">2D Map of Papers</a>
      <a class="sidebar-nav-item" href="/topic-viz.html">Topic-based Explorer</a>
      <a class="sidebar-nav-item active" href="/chatbot.html">Chatbot-based Explorer</a>
      <a class="sidebar-nav-item" href="/resources.html">Resources, Courses & Events</a>
      <a class="sidebar-nav-item" href="/contributing.html">Contributing</a>
    </nav>

    <div class="sidebar-item">
      <p style="font-size: 12px">Contact <a href="https://sjmoran.github.io">Sean Moran</a> about this survey or website.
      <span style="font-size: 9px">
        Made with <a href="https://jekyllrb.com">Jekyll</a> and <a href="https://github.com/poole/hyde">Hyde</a>.
      </span></p>
    </div>
  </div>
</div>

<script>
  // Initiate search when 'Enter' is pressed in the search input
  $("#searchTarget").keydown(function (e) {	
    if (e.keyCode == 13) {
      search();
    }
  });

  function search() {
    var query = $("#searchTarget").val();
    try {
      ga('send', 'event', 'search', 'search', query);  // Google Analytics event tracking
    } finally {
      // Redirect to papers.html with the query as a hash
      window.location = "/papers.html#" + encodeURIComponent(query);
    }
  }
</script>


    <div class="content container">
      <div class="page">
  <h1 class="page-title">Chat with the LLM-Bible Bot</h1>
  <p>The LLM-Bible Chatbot can help you find relevant papers, with nearly 2,000 papers (and growing) currently ingested into the Botâ€™s knowledge base.</p>

<div class="container">
    <h3>Example Queries</h3>
    <ul id="popular-queries-list"></ul>
</div>

<p>Feel free to ask any of your own questions!</p>

<div class="chat-layout">
  <div class="chat-container">
    <div class="chatbox">
      <div id="messages" class="messages"></div>

      <div id="loading" style="display: none; text-align: center; padding: 10px;">
        <span class="spinner"></span> Retrieving response...
      </div>

      <div class="input-area">
        <input id="query" type="text" placeholder="Ask a question..." class="chat-input" />
        <button onclick="sendQuery()" class="send-button">Send</button>
      </div>
    </div>
  </div>
</div>

<style>
html, body {
  height: 100%;
  margin: 0;
  padding: 0;
  font-family: Arial, sans-serif;
  display: flex;
  flex-direction: column;
}

.chat-layout {
  flex: 1;
  display: flex;
  flex-direction: column;
  height: 100%;
}

.chat-container {
  flex: 1;
  display: flex;
  justify-content: center;
  align-items: stretch;
  padding: 10px;
}

.chatbox {
  flex: 1;
  display: flex;
  flex-direction: column;
  width: 90%;
  max-width: 900px;
  min-width: 400px;
  border-radius: 10px;
  overflow: hidden;
  background-color: #ffffff;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

.messages {
  flex: 1;
  padding: 15px;
  overflow-y: auto;
  border-bottom: 1px solid #e0e0e0;
}

.message {
  padding: 10px;
  margin-bottom: 10px;
  border-radius: 10px;
  max-width: 80%;
  word-wrap: break-word;
}

.user {
  align-self: flex-end;
  background-color: #d1e7ff; /* Light blue */
  text-align: right;
}

.bot {
  align-self: flex-start;
  background-color: #e8f5e9; /* Light green */
  text-align: left;
}

.input-area {
  display: flex;
  padding: 10px;
  border-top: 1px solid #e0e0e0;
  background-color: #fafafa;
}

.chat-input {
  flex-grow: 1;
  padding: 15px;
  font-size: 16px;
  border: 1px solid #ccc;
  border-radius: 5px;
  outline: none;
  width: 100%;
}

.send-button {
  margin-left: 10px;
  padding: 15px 25px;
  background-color: #2196f3;
  color: #fff;
  border: none;
  border-radius: 5px;
  cursor: pointer;
}

.send-button:hover {
  background-color: #1e88e5;
}

/* Spinner */
.spinner {
  display: inline-block;
  width: 24px;
  height: 24px;
  border: 3px solid rgba(0,0,0,0.2);
  border-top: 3px solid #2196f3;
  border-radius: 50%;
  animation: spin 1s linear infinite;
  vertical-align: middle;
  margin-right: 8px;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}
</style>

<script>
// Fetch popular queries from your Flask endpoint
fetch("https://aicoinanalysis.com/popular-queries")
    .then(response => response.json())
    .then(data => {
        const queriesList = document.getElementById("popular-queries-list");

        if (data.length === 0) {
            const defaultMessage = document.createElement("li");
            defaultMessage.textContent = "No queries yet";
            queriesList.appendChild(defaultMessage);
        } else {
            const shuffledData = data.sort(() => 0.5 - Math.random()).slice(0, 5);
            shuffledData.forEach(item => {
                const listItem = document.createElement("li");
                listItem.innerHTML = `<strong>${capitalizeFirstLetter(item.query)}</strong>`;
                queriesList.appendChild(listItem);
            });
        }
    })
    .catch(error => {
        console.error("Error loading popular queries:", error);
    });

function capitalizeFirstLetter(query) {
    return query.charAt(0).toUpperCase() + query.slice(1);
}
</script>

<script>
window.onload = function() {
  displayWelcomeMessage();
};

async function sendQuery() {
  const query = document.getElementById("query").value;
  const messagesDiv = document.getElementById("messages");
  const loadingDiv = document.getElementById("loading");

  appendMessage("user", "You: " + query);
  document.getElementById("query").value = "";

  loadingDiv.style.display = "block"; // Show spinner

  try {
    const response = await fetch("https://aicoinanalysis.com/chat", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ user_input: query })
    });

    if (response.status === 429) {
      displayBotMessage("Rate limit reached, please try again tomorrow.");
      return;
    }

    if (!response.ok) {
      const errorData = await response.json();
      throw new Error(errorData.error || "Unknown error occurred");
    }

    const result = await response.json();
    if (result.answer) {
      parseAndDisplayAnswer(result.answer);
    } else {
      displayBotMessage("No answer field found in the response.");
    }
  } catch (error) {
    displayBotMessage(`Error - ${error.message}`);
  } finally {
    loadingDiv.style.display = "none"; // Hide spinner after fetch
    messagesDiv.scrollTop = messagesDiv.scrollHeight;
  }
}

function displayWelcomeMessage() {
  displayBotMessage("Hello! I'm LLM-Bible Bot. How can I assist you today?");
}

function parseAndDisplayAnswer(answer) {
  try {
    let papers = answer;

    if (typeof answer === "string") {
      const jsonStart = answer.indexOf("[");
      const jsonEnd = answer.lastIndexOf("]") + 1;
      if (jsonStart === -1 || jsonEnd === -1) {
        throw new Error("No valid JSON block found.");
      }
      const jsonString = answer.substring(jsonStart, jsonEnd);
      papers = JSON.parse(jsonString);
    }

    if (!Array.isArray(papers)) throw new Error("Expected array of papers.");

    const botMessage = document.createElement("div");
    botMessage.classList.add("message", "bot");
    botMessage.innerHTML = `<p>LLM-Bible Bot:</p><ul>${formatBotResponse(papers)}</ul>`;
    document.getElementById("messages").appendChild(botMessage);
  } catch (jsonError) {
    displayBotMessage("Error parsing the response data.");
  }
}

function displayBotMessage(text) {
  const errorMessage = document.createElement("div");
  errorMessage.classList.add("message", "bot");
  errorMessage.textContent = `LLM-Bible Bot: ${text}`;
  document.getElementById("messages").appendChild(errorMessage);
}

function appendMessage(className, text) {
  const message = document.createElement("div");
  message.classList.add("message", className);
  message.textContent = text;
  document.getElementById("messages").appendChild(message);
}

function formatBotResponse(papers) {
  if (!Array.isArray(papers)) {
    return "<li>No papers found.</li>";
  }

  return papers.map(paper => `
    <li><strong><a href="${paper.url}" target="_blank">${capitalizeTitle(paper.name)}</a></strong>: ${capitalizeSentence(paper.description)}</li>
  `).join('');
}

function capitalizeTitle(title) {
  const minorWords = ["the", "in", "and", "of", "to", "for"];
  return title.split(" ").map((word, index) => {
    if (minorWords.includes(word.toLowerCase()) && index !== 0) {
      return word.toLowerCase();
    }
    return word.charAt(0).toUpperCase() + word.slice(1).toLowerCase();
  }).join(" ");
}

function capitalizeSentence(sentence) {
  return sentence.charAt(0).toUpperCase() + sentence.slice(1);
}
</script>


</div>

    </div>

    <!-- 
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        let isBot = true;

        // Check for mouse movement or keyboard interaction
        document.addEventListener('mousemove', function () {
          isBot = false;
        });
        document.addEventListener('keydown', function () {
          isBot = false;
        });

        // Redirect or take action if no user interaction is detected
        setTimeout(function () {
          if (isBot) {
            // Redirect to a challenge page or show a message
            window.location.href = '/challenge-page.html'; // Update with your actual challenge page
          }
        }, 5000); // Adjust the time delay as needed
      });
    </script>
    -->
  </body>
</html>
